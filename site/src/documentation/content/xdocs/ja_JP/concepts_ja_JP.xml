<?xml version="1.0" encoding="utf-8"?>

<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V2.0//EN" 
          "http://forrest.apache.org/dtd/document-v20.dtd">

<!--
 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.
 The ASF licenses this file to You under the Apache License, Version 2.0
 (the "License"); you may not use this file except in compliance with
 the License.  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->

<document> 

  <header> 
    <title>概要</title> 
  </header> 

  <body> 
    <section>
      <title>概要</title>
      <p>ManifoldCFは次いような目的のために設計されたクローラフレームワークです。</p>
      <p></p>
      <ul>
        <li>シャットダウン及ぶ再起動からの回復力に強く信頼性の高いフレームワーク</li>
        <li>差分更新に対応。収集するコンテンツの条件はジョブに定義します。ジョブを継続的に実行してコンテンツの差分を収集することができます</li>
        <li>同時に平行して異なるリポジトリの種類と接続してコンテンツを収集することが可能です</li>
        <li>コンテンツセキュリティに対応しています。ユーザ毎に閲覧可能なコンテンツのみの検索結果が表示されます</li>
        <li>高速。多くのコンテンツをそれなりの時間内に処理することができます</li>
        <li>メモリ利用を予測することができます</li>
      </ul>
      <p></p>
      <p>ManifoldCFはリレーショナルデータベースを利用することで多くのアーキテクチャの目的を達成しています。現バージョンはPostgresql、Derby、MySQLに対応しています。その他のデータベースの利用も検討しています。</p>
      <p></p>
      <section>
        <title>ManifoldCFコンテンツモデル</title>
        <p></p>
        <p>Each document in ManifoldCF consists of some opaque binary data, plus some opaque associated metadata (which is described by name-value pairs), and is uniquely addressed by a URI.  The back-end search engines which ManifoldCF communicates with are all expected to support, to a greater or lesser degree, this model.</p>
        <p></p>
        <p>コンテンツはアクセストークンと関連つけることができます。アクセストークンについては次の節で説明します。</p>
        <p></p>
      </section>
      <section>
        <title>ManifoldCFセキュリティモデル</title>
        <p></p>
        <p>The ManifoldCF security model is based loosely on the standard authorization concepts and hierarchies found in Microsoft's Active Directory.  Active Directory is quite common in the kinds of environments where data repositories exist that are ripe for indexing.  Active Directory's authorization model is also easily used in a general way to represent authorization for a huge variety of third-party content repositories.</p>
        <p></p>
        <p>ManifoldCF defines a concept of an <em>access token</em>.  An access token, to ManifoldCF, is a string which is meaningful only to a specific connector or connectors.  This string describes the ability of a user to view (or not view) some set of documents.  For documents protected by Active Directory itself, an access token would be an Active Directory SID (e.g. "S-1-23-4-1-45").  But, for example, for documents protected by Livelink a wholly different string would be used.</p>
        <p></p>
        <p>In the ManifoldCF security model, it is the job of an <em>authority</em> to provide a list of access tokens for a given searching user.  Multiple authorities cooperate in that each one can add to the list of access tokens describing a given user's security.  The resulting access tokens are handed to the search engine as part of every search request, so that the search engine may properly exclude documents that the user is not allowed to see.</p>
        <p></p>
        <p>When document indexing is done, therefore, it is the job of the crawler to hand access tokens to the search engine, so that it may categorize the documents properly according to their accessibility.  Note that the access tokens so provided are meaningful only within the space of the governing authority.  Access tokens can be provided as "grant" tokens, or as "deny" tokens.  Finally, there are multiple levels of tokens, which correspond to Active Directory's concepts of "share" security, "directory" security, or "file" security.  (The latter concepts are rarely used except for documents that come from Windows or Samba systems.)</p>
        <p></p>
        <p>Once all these documents and their access tokens are handed to the search engine, it is the search engine's job to enforce security by excluding inappropriate documents from the search results.  For Solr 1.5, this infrastructure has been submitted in jira ticket SOLR-1895, found <a href="https://issues.apache.org/jira/browse/SOLR-1895">here</a>, where you can download a SearchComponent plug-in and simple instructions for setting up your copy of Solr to enforce ManifoldCF's model of document security.  Bear in mind that this plug-in is still not a complete solution, as it requires an authenticated user name to be passed to it from some upstream source, possibly a JAAS authenticator within an application server framework.</p>
        <p></p>
      </section>
      <section>
        <title>ManifoldCF論理エンティティ</title>
        <p></p>
        <section>
          <title>コネクタ</title>
          <p></p>
          <p>ManifoldCFには次の３つのコネクタがあります：</p>
          <p></p>
          <ul>
            <li>権限コネクタ</li>
            <li>リポジトリコネクタ</li>
            <li>出力コネクタ</li>
          </ul>
          <p></p>
          <p>すべてのコネクタには共通した機能があります。先ず、すべてのコネクタはプールされています。ManifoldCFは設定したコネクタのインスタンスを管理します。インスタンス数の上限を設定することもできます。
  Connector implementations have specific methods in them for managing their existence in the pools that ManifoldCF keeps them in.  Second, they are configurable.  The configuration description for a connector is an XML document, whose precise format is determined by the connector implementation.  A configured connector instance is called a <em>connection</em>, by common ManifoldCF convention.</p>
          <p></p>
          <p>コネクタは次のような機能をもちます：</p>
          <p></p>
          <table>
            <tr><th>コネクタタイプ</th><th>機能</th></tr>
            <tr><td>権限コネクタ</td><td>Furnishes a standard way of mapping a user name to access tokens that are meaningful for a given type of repository</td></tr>
            <tr><td>リポジトリコネクタ</td><td>指定されたリポジトリ（例：SharePointやWeb）からコンテンツを収集する</td></tr>
            <tr><td>出力コネクタ</td><td>収集したコンテンツと処理（追加や削除など）をバックエンド検索エンジン又はLuceneのようなエンティティに送信する</td></tr>
          </table>
          <p></p>
        </section>
        <section>
          <title>コネクション</title>
          <p></p>
          <p>As described above, a <em>connection</em> is a connector implementation plus connector-specific configuration information.  A user can define a connection of all three types in the crawler UI.</p>
          <p></p>
          <p>The kind of information included in the configuration data for a connector typically describes the "how", as opposed to the "what".  For example, you'd configure a LiveLink connection by specifying how to talk to the LiveLink server.  You would <strong>not</strong> include information about which documents to select in such a configuration.</p>
          <p></p>
          <p>There is one difference between how you define a <em>repository connection</em>, vs. how you would define an <em>authority connection</em> or <em>output connection</em>.  The difference is that you must specify a governing authority connection for your repository connection.  This is because <strong>all</strong> documents ingested by ManifoldCF need to include appropriate access tokens, and those access tokens are specific to the governing authority.</p>
          <p></p>
        </section>
        <section>
          <title>ジョブ</title>
          <p></p>
          <p>ManifoldCFで<em>ジョブ</em>とは、a description of some kind of synchronization that needs to occur between a specified repository connection and a specified output connection.  A job includes the following:</p>
          <p></p>
          <ul>
            <li>A verbal description</li>
            <li>リポジトリコネクション（暗黙的に権限コネクションを含む）</li>
            <li>出力コネクション</li>
            <li>リポジトリコネクションに特定したジョブが対象とするコンテンツとメタデータの説明</li>
            <li>クロールモデル：「最後まで実行」又は「継続実行」</li>
            <li>ジョブの実行スケジュール：指定された時間帯または即時</li>
          </ul>
          <p></p>
          <p>Jobs are allowed to share the same repository connection, and thus they can overlap in the set of documents they describe.  ManifoldCF permits this situation, although when it occurs it is probably an accident.</p>
        </section>
      </section>
    </section>
  </body>

</document>
